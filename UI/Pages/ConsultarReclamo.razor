@page "/reclamo/consultar"
@attribute [Authorize(Roles = "Cliente,Administrador")]

<PageTitle>Consultar Reclamos</PageTitle>

<div class="consultar-container">
    <h2><i class="bi bi-search"></i> Consultar Reclamos</h2>

    <EditForm Model="@Filtro" OnValidSubmit="BuscarReclamos">
        <div class="filtros">
            <div class="form-group">
                <label for="fechaInicio">Desde</label>
                <input id="fechaInicio" type="date" class="input-field" @bind="Filtro.FechaInicio" />
            </div>
            <div class="form-group">
                <label for="fechaFin">Hasta</label>
                <input id="fechaFin" type="date" class="input-field" @bind="Filtro.FechaFin" />
            </div>
            <div class="form-group">
                <button type="submit" class="btn-search">
                    <i class="bi bi-search"></i> Buscar
                </button>
            </div>
        </div>
    </EditForm>

    @if (IsLoading)
    {
        <div class="loading">Cargando reclamos...</div>
    }
    else if (Reclamos.Any())
    {
        <table class="tabla-reclamos">
            <thead>
                <tr>
                    <th>Codigo</th>
                    <th>Descripción</th>
                    <th>Fecha</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var reclamo in Reclamos)
                {
                    <tr>
                        <td>@reclamo.Codigo</td>
                        <td>@reclamo.Descripcion</td>
                        <td>@reclamo.Fecha.ToString("dd/MM/yyyy")</td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <div class="no-results">
            <i class="bi bi-info-circle"></i> No se encontraron reclamos en el rango seleccionado.
        </div>
    }

    <div class="actions">
        <button type="button" class="btn-secondary" @onclick="GoToMenu">
            <i class="bi bi-arrow-left-circle"></i> Regresar
        </button>
    </div>
</div>
